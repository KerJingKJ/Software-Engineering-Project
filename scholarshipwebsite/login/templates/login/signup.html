{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{% static 'login/css/signup.css' %}" type="text/css" rel="stylesheet" />
    <title>Sign Up</title>
</head>

<body
    style="background-image: linear-gradient(rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.5)), url('{% static 'login/img/login-bg.jpg' %}');">
    <div id="container-login">
        <h2> Sign Up </h2>

        <form method="post" id="signup-form">
            {% csrf_token %}

            <p>
                {{ form.name.label_tag }}<br>
                {{ form.name }}
            </p>
            <p>
                {{ form.email.label_tag }}<br>
                {{ form.email }}
            </p>
            <p>
                {{ form.password.label_tag }}<br>
            <div style="position: relative; display: inline-block; width: 100%;">
                {{ form.password }}
                <span id="togglePassword"
                    style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; user-select: none;">üëÅÔ∏è</span>
            </div>
            </p>
            <p>
                {{ form.confirm_password.label_tag }}<br>
            <div style="position: relative; display: inline-block; width: 100%;">
                {{ form.confirm_password }}
                <span id="toggleConfirmPassword"
                    style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; user-select: none;">üëÅÔ∏è</span>
            </div>
            </p>

            <script>
                function setupPasswordToggle(toggleId, inputId) {
                    const toggle = document.getElementById(toggleId);
                    const input = document.getElementById(inputId);

                    if (toggle && input) {
                        const show = () => input.type = 'text';
                        const hide = () => input.type = 'password';
       

                        // Mouse events
                        toggle.addEventListener('mousedown', show);
                        toggle.addEventListener('mouseup', hide);
                        toggle.addEventListener('mouseleave', hide);

                        // Touch events (for mobile)
                        toggle.addEventListener('touchstart', (e) => { e.preventDefault(); show(); });
                        toggle.addEventListener('touchend', hide);
                    }
                }

                // IDs generated by Django forms are usually id_fieldname
                setupPasswordToggle('togglePassword', 'id_password');
                setupPasswordToggle('toggleConfirmPassword', 'id_confirm_password');
            </script>

            <button type="submit" class="button">Next</button>

            {% if form.errors %}
            <div id="errorform">
                <p>Please fix the following errors:</p>
                <ul>
                    {% for field in form %}
                    {% for error in field.errors %}
                    <li>{{ field.label }}: {{ error }}</li>
                    {% endfor %}
                    {% endfor %}
                    {% for error in form.non_field_errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
        </form>
    </div>
</body>

</html>