{% extends 'reviewer/base.html' %}
{% block content %}
<style>
    /* Custom styles for the review page */
    .review-container {
        display: flex;
        flex-direction: row;
        gap: 20px;
        padding: 20px;
        height: calc(100vh - 80px);
        overflow: hidden;
    }

    .column {
        flex: 1;
        display: flex;
        flex-direction: column;
        border: 2px solid #ccc;
        border-radius: 8px;
        background-color: white;
        overflow: hidden;
    }

    .column-header {
        text-align: center;
        padding: 15px;
        font-size: 1.5rem;
        font-weight: bold;
        border-bottom: 2px solid #ccc;
        background-color: white;
        z-index: 10;
    }

    .scrollable-content {
        padding: 20px;
        overflow-y: auto;
        flex: 1;
    }

    .guardian-card {
        background-color: #7da5d8;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        color: black;
        border: 1px solid #5b8abf;
    }

    .guardian-card h3 {
        margin-top: 0;
        margin-bottom: 15px;
        font-weight: bold;
        text-decoration: underline;
        font-size: 1.1rem;
    }

    .info-row {
        display: flex;
        margin-bottom: 8px;
        align-items: center;
    }

    .info-label {
        font-weight: bold;
        width: 140px;
        flex-shrink: 0;
    }

    .info-value {
        background-color: white;
        padding: 4px 10px;
        border-radius: 15px;
        flex: 1;
        min-height: 28px;
        display: flex;
        align-items: center;
        border: 1px solid #ccc;
    }

    .docs-section {
        border: 2px solid #5b8abf;
        border-radius: 15px;
        padding: 15px;
        margin-top: 20px;
        background-color: white;
    }

    .docs-header {
        font-weight: bold;
        text-decoration: underline;
        margin-bottom: 10px;
        display: block;
    }

    /* Rubric styles preserved */
    .rubric-section {
        border: 1px solid #7da5d8;
        border-radius: 8px;
        padding: 15px;
        margin-bottom: 20px;
    }

    .rubric-title {
        font-size: 1.2rem;
        font-weight: bold;
        margin-bottom: 10px;
    }

    .rubric-box {
        border: 1px solid #aaa;
        padding: 15px;
        border-radius: 5px;
        background-color: #fcfcfc;
    }

    .rubric-box h4 {
        margin-top: 0;
        font-size: 1rem;
        font-weight: bold;
    }

    .formula-box {
        border: 1px solid #ccc;
        padding: 10px;
        margin: 10px 0;
        text-align: center;
        background-color: #f0f0f0;
        font-family: monospace;
    }

    .pci-options {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-top: 10px;
    }

    .checkbox-group {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .checkbox-item {
        display: flex;
        align-items: flex-start;
        gap: 10px;
    }

    .checkbox-item input[type="checkbox"] {
        margin-top: 5px;
    }

    .nav-buttons {
        display: flex;
        justify-content: center;
        gap: 50px;
        padding: 20px 0;
    }

    .btn-nav {
        padding: 10px 30px;
        border: none;
        border-radius: 5px;
        color: white;
        font-weight: bold;
        cursor: pointer;
        width: 100px;
        text-align: center;
        text-decoration: none;
    }

    .btn-prev {
        background-color: #2b5797;
    }

    .btn-next {
        background-color: #2b5797;
    }

    .btn-nav:hover {
        opacity: 0.9;
    }
</style>

<div class="container-fluid">
    <h1>Scholarship Review - Step 2</h1>

    <div class="review-container">
        <!-- Left Column: Applicant Form -->
        <div class="column">
            <div class="column-header">Applicant Form</div>
            <div class="scrollable-content">
                <p style="font-style: italic; color: #666; margin-bottom: 10px;">Family Background</p>

                {% for guardian in guardians %}
                <div class="guardian-card">
                    <h3>Guardian {{ forloop.counter }}:</h3>

                    <div class="info-row">
                        <span class="info-label">Relationship:</span>
                        <div class="info-value">{{ guardian.relationship }}</div>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Name:</span>
                        <div class="info-value">{{ guardian.name }}</div>
                    </div>
                    <div class="info-row">
                        <span class="info-label">IC Number:</span>
                        <div class="info-value">{{ guardian.ic_no }}</div>
                    </div>
                    <div class="info-row">
                        <span class="info-label" style="width: auto; min-width: 100px;">Date of Birth:</span>
                        <div class="info-value" style="width: 130px; flex: none; margin-right: 15px;">
                            {{ guardian.date_of_birth }}
                        </div>
                        <span class="info-label" style="width: auto; min-width: 40px; margin-right: 10px;">Age:</span>
                        <div class="info-value" style="width: 60px; flex: none;">{{ guardian.age }}</div>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Nationality:</span>
                        <div class="info-value">{{ guardian.nationality }}</div>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Gender:</span>
                        <div class="info-value">{{ guardian.gender }}</div>
                    </div>
                    <div class="info-row" style="align-items: flex-start;">
                        <span class="info-label" style="margin-top: 5px;">Address:</span>
                        <div class="info-value" style="height: auto; min-height: 60px;">{{ guardian.address }}</div>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Contact number:</span>
                        <div class="info-value">{{ guardian.contact_number }}</div>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Email Address:</span>
                        <div class="info-value">{{ guardian.email_address }}</div>
                    </div>
                </div>
                {% empty %}
                <p>No Guardian Information Available.</p>
                {% endfor %}

                <!-- Supporting Documents -->
                <div class="guardian-card" style="background-color: white; border: 2px solid #2b5797; padding: 15px;">
                    <span class="docs-header">Supporting Documents:</span>
                    <div><strong>Upload</strong></div>
                    <div style="margin-top: 5px;">
                        <strong>EA Form:</strong>
                        {% if app.ea_form and app.ea_form.name %}
                        <a href="{{ app.ea_form.url }}" target="_blank">ea.pdf</a>
                        {% else %}
                        N/A
                        {% endif %}
                    </div>
                    <div style="margin-top: 5px;">
                        <strong>Latest 3 months payslip:</strong>
                        {% if app.payslip and app.payslip.name %}
                        <a href="{{ app.payslip.url }}" target="_blank">payslip.pdf</a>
                        {% else %}
                        N/A
                        {% endif %}
                    </div>
                </div>

            </div>
        </div>

        <!-- Right Column: Criteria Rubrics -->
        <div class="column">
            <div class="column-header">Criteria Rubrics</div>
            <div class="scrollable-content">
                <form method="post" action="">
                    {% csrf_token %}

                    <p style="color: red; padding: 10px;">
                        (Rubrics section disabled temporarily due to technical issue. Please proceed.)
                    </p>

                    <!-- 1. Data Integrity Check (Commented out) -->
                    <!--
                    <div class="rubric-section">
                        ...
                    </div>
                    -->

                    <!-- Footer / Navigation -->
                    <div class="nav-buttons">
                        <button type="submit" name="previous" class="btn-nav btn-prev">Previous</button>
                        <button type="submit" name="next" class="btn-nav btn-next">Next</button>
                    </div>

                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}