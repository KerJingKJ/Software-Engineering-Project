{% extends 'reviewer/base.html' %}
{% block content %}
{% load static %}

<div class="container-fluid">
    <h1> Review Scholarship </h1>
    <div style="display: flex; height: 100vh;">
        <div style="flex: 1; overflow-y: auto; border-right: 1px solid #ccc; padding: 20px; background-color: #f9f9f9;">
            <h2>Application Details</h2>
            {% if app %}
            <div
                style="background: white; border: 1px solid #ddd; padding: 15px; margin-bottom: 20px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                <h3 style="border-bottom: 1px solid #eee; padding-bottom: 10px; margin-top: 0;">
                    {{ app.name }} (ID: {{ app.id }})
                </h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <p><strong>Scholarship:</strong> {{ app.scholarship.name }}</p>
                    <p><strong>Status:</strong> {{ app.status }}</p>
                    <p><strong>IC No:</strong> {{ app.ic_no }}</p>
                    <p><strong>Email:</strong> {{ app.email_address }}</p>
                    <p><strong>Contact:</strong> {{ app.contact_number }}</p>
                    <p><strong>Date of Birth:</strong> {{ app.date_of_birth }}</p>
                    <p><strong>Age:</strong> {{ app.age }}</p>
                    <p><strong>Gender:</strong> {{ app.gender }}</p>
                    <p><strong>Race:</strong> {{ app.race }}</p>
                    <p><strong>Nationality:</strong> {{ app.nationality }}</p>
                    <p><strong>Programme:</strong> {{ app.programme }}</p>
                    <p><strong>Intake:</strong> {{ app.intake }}</p>
                    <p><strong>Qual:</strong> {{ app.highest_qualification }}</p>
                </div>
                <div style="margin-top: 10px;">
                    <p><strong>Home Address:</strong> {{ app.home_address }}</p>
                    <p><strong>Correspondence Address:</strong> {{ app.correspondence_address }}</p>
                </div>
                <div style="margin-top: 10px;">
                    <p><strong>Personal Achievement:</strong><br> {{ app.personal_achievement }}</p>
                    <p><strong>Reason to Deserve:</strong><br> {{ app.reason_deserve }}</p>
                </div>
                <div style="margin-top: 15px; border-top: 1px solid #eee; padding-top: 10px;">
                    <strong>Documents:</strong>
                    <div style="margin-top: 5px;">
                        <strong>IC/Passport:</strong>
                        {% if app.passport_photo %}
                        <a href="{{ app.passport_photo.url }}" target="_blank">passportphoto.jpg</a>
                        {% else %}
                        N/A
                        {% endif %}
                    </div>

                    <div style="margin-top: 5px;">
                        <strong>Academic Result:</strong>
                        {% if app.academic_result %}
                        <a href="{{ app.academic_result.url }}" target="_blank">result.pdf</a>
                        {% else %}
                        N/A
                        {% endif %}  
                    </div>
                    
                </div>
            </div>
            {% else %}
            <p>No applications found.</p>
            {% endif %}
        </div>
        <div style="flex: 1; padding: 20px; overflow-y: auto;">
            {% if app %}
            <form method="post" action="{% url 'reviewer_with_id' app.id %}">
                {% csrf_token %}
                <h2>Eligibility Checker</h2>
                <table border="1" cellpadding="10" cellspacing="0" style="width: 100%; border-collapse: collapse;">
                    <tr>
                        <th style="text-align: left;">Criteria</th>
                        <th style="width: 50px;">Check</th>
                    </tr>
                    <tr>
                        <td><strong>Citizenship:</strong> Malaysian</td>
                        <td style="text-align: center;"><input {{ c_attr }} type="checkbox" name="citizenship_check">
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Programme Level:</strong> Foundation/Bachelor's Degree</td>
                        <td style="text-align: center;"><input {{ pl_attr }} type="checkbox"
                                name="programme_level_check"></td>
                    </tr>
                    <tr>
                        <td><strong>Qualifying Exam:</strong></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td style="padding-left: 20px;">If Programme Level: Foundation, SPM/O-Level</td>
                        <td style="text-align: center;"><input {{ efs_attr }} type="checkbox"
                                name="exam_foundation_spm"></td>
                    </tr>
                    <tr>
                        <td style="padding-left: 20px;">If Programme Level: Bachelor's Degree, STPM A-Level/UEC</td>
                        <td style="text-align: center;"><input {{ eds_attr }} type="checkbox"
                                name="exam_degree_stpm_uec"></td>
                    </tr>
                    <tr>
                        <td style="padding-left: 20px;">If Programme Level: Bachelor's Degree, Foundation/Matriculation
                            or equivalents</td>
                        <td style="text-align: center;"><input {{ edm_attr }} type="checkbox"
                                name="exam_degree_matriculation"></td>
                    </tr>
                    <tr>
                        <td><strong>Minimum Grades/CGPA:</strong></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td style="padding-left: 20px;">SPM/O-Level: 9As and above</td>
                        <td style="text-align: center;"><input {{ gspm_attr }} type="checkbox" name="grade_spm"></td>
                    </tr>
                    <tr>
                        <td style="padding-left: 20px;">STPM A-Level: 4A's</td>
                        <td style="text-align: center;"><input {{ gstpm_attr }} type="checkbox" name="grade_stpm"></td>
                    </tr>
                    <tr>
                        <td style="padding-left: 20px;">UEC: 8A's</td>
                        <td style="text-align: center;"><input {{ guec_attr }} type="checkbox" name="grade_uec"></td>
                    </tr>
                    <tr>
                        <td style="padding-left: 20px;">Foundation / Matriculation or equivalents: CGPA 3.90 and above
                        </td>
                        <td style="text-align: center;"><input {{ gf_attr }} type="checkbox" name="grade_foundation">
                        </td>
                    </tr>
                    <tr>
                        <td><strong>Documents Verified</strong></td>
                        <td style="text-align: center;"><input {{ dv_attr }} type="checkbox" name="documents_verified">
                        </td>
                    </tr>
                </table>

                <h2 style="margin-top: 30px;">Qualitative Scoring Matrix</h2>
                <table border="1" cellpadding="10" cellspacing="0" style="width: 100%; border-collapse: collapse;">
                    <tr>
                        <th style="text-align: left;">Criteria</th>
                        <th style="width: 50px;">Check</th>
                    </tr>
                    <tr>
                        <td colspan="2"><strong>A. Academic Excellence</strong></td>
                    </tr>
                    <tr>
                        <td colspan="2" style="padding-left: 20px;">1) Academic Performance (Grades)</td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">(1) Borderline: CGPA 3.90 - 3.91 / Exactly 4As / 8As (UEC) /
                            Exactly 9As (Mix of A/A-)</td>
                        <td style="text-align: center;"><input {{ ab_attr }} type="checkbox" name="academic_borderline">
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">(2) Competent: CGPA 3.92 - 3.94 / Exactly 9As (High A count)
                        </td>
                        <td style="text-align: center;"><input {{ ac_attr }} type="checkbox" name="academic_competent">
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">(3) Superior: CGPA 3.95 - 3.99 / Mix of A+ and A (9+ As)</td>
                        <td style="text-align: center;"><input {{ as_attr }} type="checkbox" name="academic_superior">
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">(4) Elite: CGPA 4.00 / 4 A* (A-Level) / Straight A+ (SPM)</td>
                        <td style="text-align: center;"><input {{ ae_attr }} type="checkbox" name="academic_elite"></td>
                    </tr>
                    <tr>
                        <td colspan="2" style="padding-left: 20px;">2) Academic Rigor & Awards</td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">Received "Best Student" / Dean's List / Book Prize award.</td>
                        <td style="text-align: center;"><input {{ rbs_attr }} type="checkbox" name="rigor_best_student">
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">Participated in National/State Academic Competitions (Olympiad,
                            Debate, Hackathon).</td>
                        <td style="text-align: center;"><input {{ rc_attr }} type="checkbox" name="rigor_competitions">
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">None of the above.</td>
                        <td style="text-align: center;"><input {{ rn_attr }} type="checkbox" name="rigor_none"></td>
                    </tr>
                    <tr>
                        <td colspan="2"><strong>B. Co-Curricular & Leadership</strong></td>
                    </tr>
                    <tr>
                        <td colspan="2" style="padding-left: 20px;">1) Club/Society/Event Highest Position</td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">Leader (President, Captain, Founder)</td>
                        <td style="text-align: center;"><input {{ ll_attr }} type="checkbox" name="leadership_leader">
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">Sub-leader (Vice-President, Vice-Captain, Co-Founder)</td>
                        <td style="text-align: center;"><input {{ ls_attr }} type="checkbox"
                                name="leadership_subleader"></td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">Secretary/Treasurer</td>
                        <td style="text-align: center;"><input {{ lsec_attr }} type="checkbox"
                                name="leadership_secretary"></td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">Committee Chairs (Social, Marketing, Events)</td>
                        <td style="text-align: center;"><input {{ lcom_attr }} type="checkbox"
                                name="leadership_committee"></td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">Member</td>
                        <td style="text-align: center;"><input {{ lm_attr }} type="checkbox" name="leadership_member">
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" style="padding-left: 20px;">2) Competition/Event Achievement</td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">National Level</td>
                        <td style="text-align: center;"><input {{ cn_attr }} type="checkbox"
                                name="competition_national"></td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">State Level</td>
                        <td style="text-align: center;"><input {{ cs_attr }} type="checkbox" name="competition_state">
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">University/District Level</td>
                        <td style="text-align: center;"><input {{ cu_attr }} type="checkbox"
                                name="competition_university"></td>
                    </tr>
                    <tr>
                        <td style="padding-left: 40px;">Participant</td>
                        <td style="text-align: center;"><input {{ cp_attr }} type="checkbox"
                                name="competition_participant"></td>
                    </tr>
                </table>
                <br>
                <button type="submit" style="padding: 10px 20px; cursor: pointer;">Next</button>
            </form>
            {% else %}
            <p>Select an application to view eligibility check.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}